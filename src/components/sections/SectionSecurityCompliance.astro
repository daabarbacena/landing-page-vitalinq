---
import medicoReceitandoImg from "../../assets/images/securitySection/working-medics.jpg";
import oncologiaImg from "../../assets/images/securitySection/documentation.jpg";
import escleroseImg from "../../assets/images/securitySection/security.jpg";
import doencasRarasImg from "../../assets/images/securitySection/conformidade.jpg";

const pillars = [
  { number: "01", title: "Documentação orientada" },
  { number: "02", title: "Conformidade regulatória" },
  { number: "03", title: "Rastreabilidade" },
  { number: "04", title: "Privacidade" },
];

const gridImages = [
  { url: medicoReceitandoImg.src, alt: "Equipe trabalhando com segurança", warp: "warp-br" },
  { url: oncologiaImg.src, alt: "Documentação completa", warp: "warp-bl" },
  { url: escleroseImg.src, alt: "Segurança em cada etapa", warp: "warp-tr" },
  { url: doencasRarasImg.src, alt: "Conformidade regulatória", warp: "warp-tl" },
];
---

<section
  id="seguranca"
  aria-labelledby="security-heading"
  class="relative py-24 sm:py-32 lg:py-40 overflow-hidden bg-[#f8f7f5]"
>
  <div class="relative z-10 max-w-7xl mx-auto px-6">
    <div class="flex flex-col lg:flex-row items-center gap-12 lg:gap-16">
      <!-- Left: Text Content -->
      <div class="flex-1 flex flex-col text-center lg:text-left items-center lg:items-start lg:max-w-xl">
        <span class="text-sm font-medium tracking-wider uppercase text-[#673de6] sec-anim" style="animation-delay: 100ms;">
          Segurança
        </span>

        <h2
          id="security-heading"
          class="mt-4 text-4xl sm:text-5xl lg:text-6xl font-light tracking-tight text-gray-900 sec-anim"
          style="animation-delay: 200ms;"
        >
          Segurança e <span class="font-normal text-[#673de6]">conformidade</span>
        </h2>

        <div class="mt-5 w-24 h-1 bg-[#673de6] rounded-full sec-anim" style="animation-delay: 300ms;"></div>

        <p class="mt-6 text-gray-600 font-light leading-relaxed text-base max-w-md sec-anim" style="animation-delay: 400ms;">
          Importação de medicamentos com etapas regulatórias claras. Orientamos, organizamos e acompanhamos cada fase do processo.
        </p>

        <div class="mt-8 grid grid-cols-2 gap-x-6 gap-y-3 sec-anim" style="animation-delay: 500ms;">
          {pillars.map((pillar) => (
            <div class="flex items-center gap-3">
              <span class="text-xs font-bold text-[#673de6]">{pillar.number}</span>
              <span class="text-sm text-gray-700 font-medium">{pillar.title}</span>
            </div>
          ))}
        </div>

        <div class="mt-10 sec-anim" style="animation-delay: 600ms;">
          <a
            href="/#contato"
            class="inline-flex items-center justify-center gap-2 px-7 py-3.5 bg-[#673de6] text-white text-sm font-medium rounded-full transition-all duration-300 hover:bg-[#5a32d4] hover:shadow-lg"
          >
            Iniciar com segurança
            <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
            </svg>
          </a>
        </div>
      </div>

      <!-- Right: 2x2 Diced Image Grid -->
      <div class="flex-1 flex items-center justify-center lg:justify-end sec-anim" style="animation-delay: 400ms;">
        <div class="diced-grid">
          {gridImages.map((img) => (
            <div class={`diced-cell ${img.warp}`}>
              <img
                src={img.url}
                alt={img.alt}
                class="diced-img"
                loading="lazy"
              />
            </div>
          ))}
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .diced-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
    width: 100%;
    max-width: 480px;
    aspect-ratio: 1 / 1;
  }

  .diced-cell {
    position: relative;
    width: 100%;
    padding-bottom: 100%;
    overflow: hidden;
    border-radius: 20px;
    --r: 20px;
    --s: 40px;
    --x: 25px;
    --y: 5px;
  }

  .diced-img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .warp-tr {
    --_m: / calc(2 * var(--r)) calc(2 * var(--r)) radial-gradient(#000 70%, #0000 72%);
    --_g: conic-gradient(at calc(100% - var(--r)) var(--r), #0000 25%, #000 0);
    --_d: (var(--s) + var(--r));
    -webkit-mask:
      calc(100% - var(--_d) - var(--x)) 0 var(--_m),
      100% calc(var(--_d) + var(--y)) var(--_m),
      radial-gradient(var(--s) at 100% 0, #0000 99%, #000 calc(100% + 1px)) calc(-1 * var(--r) - var(--x)) calc(var(--r) + var(--y)),
      var(--_g) calc(-1 * var(--_d) - var(--x)) 0,
      var(--_g) 0 calc(var(--_d) + var(--y));
    -webkit-mask-repeat: no-repeat;
    mask:
      calc(100% - var(--_d) - var(--x)) 0 var(--_m),
      100% calc(var(--_d) + var(--y)) var(--_m),
      radial-gradient(var(--s) at 100% 0, #0000 99%, #000 calc(100% + 1px)) calc(-1 * var(--r) - var(--x)) calc(var(--r) + var(--y)),
      var(--_g) calc(-1 * var(--_d) - var(--x)) 0,
      var(--_g) 0 calc(var(--_d) + var(--y));
    mask-repeat: no-repeat;
  }

  .warp-tl {
    --_m: / calc(2 * var(--r)) calc(2 * var(--r)) radial-gradient(#000 70%, #0000 72%);
    --_g: conic-gradient(at var(--r) var(--r), #000 75%, #0000 0);
    --_d: (var(--s) + var(--r));
    -webkit-mask:
      calc(var(--_d) + var(--x)) 0 var(--_m),
      0 calc(var(--_d) + var(--y)) var(--_m),
      radial-gradient(var(--s) at 0 0, #0000 99%, #000 calc(100% + 1px)) calc(var(--r) + var(--x)) calc(var(--r) + var(--y)),
      var(--_g) calc(var(--_d) + var(--x)) 0,
      var(--_g) 0 calc(var(--_d) + var(--y));
    -webkit-mask-repeat: no-repeat;
    mask:
      calc(var(--_d) + var(--x)) 0 var(--_m),
      0 calc(var(--_d) + var(--y)) var(--_m),
      radial-gradient(var(--s) at 0 0, #0000 99%, #000 calc(100% + 1px)) calc(var(--r) + var(--x)) calc(var(--r) + var(--y)),
      var(--_g) calc(var(--_d) + var(--x)) 0,
      var(--_g) 0 calc(var(--_d) + var(--y));
    mask-repeat: no-repeat;
  }

  .warp-bl {
    --_m: / calc(2 * var(--r)) calc(2 * var(--r)) radial-gradient(#000 70%, #0000 72%);
    --_g: conic-gradient(from 180deg at var(--r) calc(100% - var(--r)), #0000 25%, #000 0);
    --_d: (var(--s) + var(--r));
    -webkit-mask:
      calc(var(--_d) + var(--x)) 100% var(--_m),
      0 calc(100% - var(--_d) - var(--y)) var(--_m),
      radial-gradient(var(--s) at 0 100%, #0000 99%, #000 calc(100% + 1px)) calc(var(--r) + var(--x)) calc(-1 * var(--r) - var(--y)),
      var(--_g) calc(var(--_d) + var(--x)) 0,
      var(--_g) 0 calc(-1 * var(--_d) - var(--y));
    -webkit-mask-repeat: no-repeat;
    mask:
      calc(var(--_d) + var(--x)) 100% var(--_m),
      0 calc(100% - var(--_d) - var(--y)) var(--_m),
      radial-gradient(var(--s) at 0 100%, #0000 99%, #000 calc(100% + 1px)) calc(var(--r) + var(--x)) calc(-1 * var(--r) - var(--y)),
      var(--_g) calc(var(--_d) + var(--x)) 0,
      var(--_g) 0 calc(-1 * var(--_d) - var(--y));
    mask-repeat: no-repeat;
  }

  .warp-br {
    --_m: / calc(2 * var(--r)) calc(2 * var(--r)) radial-gradient(#000 70%, #0000 72%);
    --_g: conic-gradient(from 90deg at calc(100% - var(--r)) calc(100% - var(--r)), #0000 25%, #000 0);
    --_d: (var(--s) + var(--r));
    -webkit-mask:
      calc(100% - var(--_d) - var(--x)) 100% var(--_m),
      100% calc(100% - var(--_d) - var(--y)) var(--_m),
      radial-gradient(var(--s) at 100% 100%, #0000 99%, #000 calc(100% + 1px)) calc(-1 * var(--r) - var(--x)) calc(-1 * var(--r) - var(--y)),
      var(--_g) calc(-1 * var(--_d) - var(--x)) 0,
      var(--_g) 0 calc(-1 * var(--_d) - var(--y));
    -webkit-mask-repeat: no-repeat;
    mask:
      calc(100% - var(--_d) - var(--x)) 100% var(--_m),
      100% calc(100% - var(--_d) - var(--y)) var(--_m),
      radial-gradient(var(--s) at 100% 100%, #0000 99%, #000 calc(100% + 1px)) calc(-1 * var(--r) - var(--x)) calc(-1 * var(--r) - var(--y)),
      var(--_g) calc(-1 * var(--_d) - var(--x)) 0,
      var(--_g) 0 calc(-1 * var(--_d) - var(--y));
    mask-repeat: no-repeat;
  }

  @keyframes sec-anim-kf {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .sec-anim {
    animation: sec-anim-kf 0.6s ease-out forwards;
    opacity: 0;
  }

  @media (prefers-reduced-motion: reduce) {
    .sec-anim {
      animation: none;
      opacity: 1;
    }
  }
</style>
