---
import { MEDICAMENTOS_TRIAGEM_OPTIONS } from "../../types/triagem";
import LabBackground from "../LabBackground.astro";
import logoVitalinQ from "../../assets/images/logos/logo-vitalinq.svg";

// Filtrar op√ß√µes ativas e orden√°-las
const medicamentosTriagem = MEDICAMENTOS_TRIAGEM_OPTIONS
  .filter((opt) => opt.active !== false)
  .sort((a, b) => (a.order ?? 0) - (b.order ?? 0));

const selectId = "medicamentos-select";
const selectDescId = "medicamentos-description";
---

<section
  id="inicio"
  aria-labelledby="hero-headline"
  class="relative min-h-screen overflow-hidden bg-[#191919] text-white"
>
  <!-- Laboratory Background Animation -->
  <LabBackground />

  <!-- Backdrop Blur Layer -->
  <div class="absolute inset-0 backdrop-blur-sm z-0"></div>

  <!-- Conte√∫do relativo (por cima dos glows) -->
  <div class="relative z-10">
    <!-- Hero content grid: texto + triagem -->
    <div class="mx-auto max-w-7xl px-4 pt-24 pb-16 sm:px-6 sm:pt-32 sm:pb-24 lg:px-8">
      <div class="grid gap-12 lg:grid-cols-2 lg:gap-16 lg:items-start">
        <!-- Coluna esquerda: texto + bullets -->
        <div class="text-center lg:text-left">
          <!-- Headline -->
          <h1
            id="hero-headline"
            class="text-4xl font-bold leading-tight tracking-tight sm:text-5xl lg:text-6xl"
          >
            Importe seu medicamento de forma <span class="text-[#673de6]">segura, simples e r√°pida</span>
          </h1>

          <!-- Subheadline -->
          <p class="mt-6 text-lg text-[#fff9] leading-relaxed">
            Assessoria especializada na importa√ß√£o de medicamentos para M√©dicos, Pacientes, Cl√≠nicas, Farm√°cias e Hospitais. Cuidamos de todo o processo para voc√™.
          </p>

          <!-- Bullets de confian√ßa -->
          <ul class="mt-8 space-y-4 inline-block text-left" aria-label="Pontos de confian√ßa">
            <li class="flex items-start gap-3">
              <span
                class="flex h-6 w-6 items-center justify-center rounded-full bg-[#673de6] text-xs font-bold text-white flex-shrink-0"
                aria-hidden="true"
              >
                ‚úì
              </span>
              <span class="text-base text-white">‚úÖ Resposta em at√© 24 horas ap√≥s triagem</span>
            </li>
            <li class="flex items-start gap-3">
              <span
                class="flex h-6 w-6 items-center justify-center rounded-full bg-[#673de6] text-xs font-bold text-white flex-shrink-0"
                aria-hidden="true"
              >
                ‚úì
              </span>
              <span class="text-base text-white">üîí 100% seguro e em conformidade regulat√≥ria</span>
            </li>
            <li class="flex items-start gap-3">
              <span
                class="flex h-6 w-6 items-center justify-center rounded-full bg-[#673de6] text-xs font-bold text-white flex-shrink-0"
                aria-hidden="true"
              >
                ‚úì
              </span>
              <span class="text-base text-white">üë®‚Äç‚öïÔ∏è Equipe especializada dispon√≠vel 24/7</span>
            </li>
          </ul>

          <!-- TODO: Substituir select est√°tico por fetch/API da triagem em tempo real quando admin estiver pronto -->
        </div>

        <!-- Coluna direita: seletor de medicamento (sem card) -->
        <div class="mt-8 lg:mt-0 text-center lg:text-left">
          <h2 class="text-xl font-semibold text-white">
            Para orientar melhor, selecione o tipo de medicamento
          </h2>

          <p class="mt-3 text-sm text-[#fff9] leading-relaxed">
            Isso ajuda nossa equipe a entender seu caso e indicar o caminho mais adequado. Voc√™ pode alterar depois.
          </p>

          <!-- Select -->
          <div class="mt-6">
            <label for={selectId} class="block text-sm font-medium text-white">
              Tipo de medicamento
            </label>

            <select
              id={selectId}
              name="medicamentos"
              aria-describedby={selectDescId}
              class="mt-3 block w-full rounded-lg border border-[#673de6]/50 bg-[#191919] px-4 py-3 text-base text-white placeholder-[#fff9] shadow-sm ring-1 ring-[#673de6]/20 focus:border-[#673de6] focus:ring-2 focus:ring-[#673de6]/40 transition-all"
            >
              <option value="" disabled selected>
                Selecione uma op√ß√£o
              </option>
              {medicamentosTriagem.map((opt) => (
                <option value={opt.value}>{opt.label}</option>
              ))}
            </select>

            <p id={selectDescId} class="mt-2 text-xs text-[#fff9]">
              As op√ß√µes s√£o atualizadas pela nossa equipe em tempo real, conforme disponibilidade e regulamenta√ß√£o.
            </p>
          </div>

          <!-- Bot√£o -->
          <a
            id="hero-whatsapp-cta"
            href="https://wa.me/13024657818"
            target="_blank"
            rel="noopener noreferrer"
            class="mt-6 inline-block rounded-lg bg-[#673de6] px-8 py-4 text-base font-semibold text-white shadow-lg transition-all hover:shadow-[0_0_32px_rgba(112,71,235,0.4)] active:scale-95"
          >
            üöÄ Iniciar importa√ß√£o agora
          </a>

          <!-- Badge de urg√™ncia -->
          <p class="mt-4 text-sm text-[#fff9]">
            ‚è±Ô∏è Resposta garantida em at√© 24h
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  option {
    background-color: #191919;
    color: white;
  }

  option:checked {
    background: linear-gradient(#673de6, #673de6);
    background-color: #673de6;
    color: white;
  }
</style>
